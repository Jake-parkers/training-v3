= Implementing Your First Model
:slug: 01-implementing-first-model
:doctype: book
:toc: left
:toclevels: 4
:imagesdir: ../images
:module-next-title: Importing Data into the Graph

== About this module

At the end of this module, you should be able to:
[square]
* Write Cypher code to implement a simple initial model.
* Confirm that the starter data is in the graph.

== Domain used for this training

[.notes]
--
For this training we will work with a familiar domain, airplane flights.
We are working in a familiar domain so that we can focus on implementation details, and not be distracted by wider concepts.

Specifically, we will use a dataset from the https://bts.gov/[US Bureau of Transportation].
--

image::AirlineDomain.png[AirlineDomain,width=900,align=center]

=== Data used for this training

[.notes]
--
The airline data itself is quite rich.
We will not make use of every part of it in the exercises, but you can check it out if you have spare time during the exercises.
--

[.is-half.left]
--
image::AirlineIndustryData1.png[AirlineIndustryData1,width=500,align=center]
--

[.is-half.right]
--
image::AirlineIndustryData2.png[AirlineIndustryData2,width=500,align=center]
--

image::AirlineIndustryData3.png[AirlineIndustryData3,width=500,align=center]

== Application question for our model

image::InitialQuestionAirports.png[InitialQuestionAirports,width=500,align=center]

[.notes]
--
For this question:

[square]
* What are the entities?
* What are the connections between entities?
* What properties are needed?
--

== Sample data for our model

[.notes]
--
Here is how we might model for this question with some sample data:
--

ifdef::backend-revealjs[]
[.is-half.left]
--
image::InitialQuestionAirports.png[InitialQuestionAirports,width=500,align=center]
--
endif::[]

[.is-half.right]
--
image::InitialSampleDataAndModel.png[InitialSampleDataAndModel,width=500,align=center]
--

== Working with the sample data

[.statement]
A best practice when creating a graph with Cypher is to use the `MERGE` statement.
This ensures that you will not create duplicate nodes or relationships in the graph.

In the next exercise, Exercise 1, you will:

. Create three Airport nodes and two CONNECTED_TO relationships per the initial data model by using the `MERGE` statement.

. Query the graph to show the newly-created nodes and relationships.

[.notes]
--
Creating the nodes and relationships using the `MERGE` statement and hard-coding values is fine for small sample data, but once you start working with larger amounts of data, you will want to load the data (typically from CSV files).
--

[.student-exercise]
== Exercise 1: Getting started with the airport graph data model

Before you start this exercise you must:

. Create a project in Neo4j Desktop.
. Create a local database in the project using the version of Neo4j 4.x.
. Start the database.
. Open a Neo4j Browser window for the database.

In the query edit pane of Neo4j Browser, execute the browser command:

kbd:[:play 4.0-neo4j-modeling-exercises]

and follow the instructions for Exercise 1.

[NOTE]
This exercise has 3 steps.
Estimated time to complete: 15 minutes.

ifdef::backend-revealjs[]
[.notes]
--

While the students are doing this exercise, you can populate your empty database as follows:
MERGE (a:Airport {code:'LAS'})
MERGE (b:Airport {code:'LAX'})
MERGE (c:Airport {code:'ABQ'})
MERGE (a)-[:`CONNECTED_TO` {airline:'WN',flightNumber:'82',date:'2019-1-3',departure:'1715',arrival:'1820'}]->(b)
MERGE (a)-[:`CONNECTED_TO` {airline:'WN',flightNumber:'500',date:'2019-1-3',departure:'1445',arrival:'1710'}]->(c)
endif::[]

[.quiz]
== Check your understanding

=== Question 1

[.statement]
What elements of a Neo4j graph are used to categorize entities?

[.statement]
Select the correct answer.

[%interactive.answers]
- [ ] Relationship
- [ ] Property
- [ ] Node
- [x] Label

=== Question 2

[.statement]
Which statements below are true about Neo4j graph traversal?

[.statement]
Select the correct answers.

[%interactive.answers]
- [x] Traversal during a query starts at a set of anchor nodes.
- [ ] Traversal during a query ends at an anchor node.
- [x] A relationship is only traversed once during a query.
- [ ] A relationship can be traversed multiple times during a query.

=== Question 3

[.statement]
What modeling tool is designed specifically for use with Neo4j?

[.statement]
Select the correct answer.

[%interactive.answers]
- [ ] Visio
- [ ] Sketch
- [x] Arrow Tool
- [ ] Neo4j Modeler

[.summary]
== Summary

You should now be able to:
[square]
* Describe what graph data modeling is.
* Describe how Neo4j supports graph data modeling.
* Describe the tools you can use for graph data modeling.
* Describe the workflow for graph data modeling.
